<%- include('../partials/user/header.ejs') %>

<style>
    .error {
        color: red;
    }
</style>

<main class="main">
    <section class="pt-150 pb-150">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 m-auto">
                    <div class="row">
                        <%- include('../partials/user/sidebar.ejs') %>
                            <div class="col-md-8">
                                <div class="container mt-5">
                                    <h2
                                        style="font-size: 24px; font-weight: bold; color: #333; margin-bottom: 1rem;">
                                        ADD A NEW ADDRESS</h2>

                                        <form id="addressForm" method="post" action="/addAddress" onsubmit="return validateForm()">
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <label>Address Type <span class="required">*</span></label>
                                                    <input  name="addressType" id="addressType" type="text" placeholder="e.g., Home, Work">
                                                    <small id="addressTypeError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>Name <span class="required">*</span></label>
                                                    <input  name="name" id="name" type="text">
                                                    <small id="nameError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>City <span class="required">*</span></label>
                                                    <input  name="city" id="city" type="text">
                                                    <small id="cityError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>Landmark <span class="required">*</span></label>
                                                    <input  name="landMark" id="landMark" type="text">
                                                    <small id="landMarkError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>State <span class="required">*</span></label>
                                                    <input  name="state" id="state" type="text">
                                                    <small id="stateError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>Pincode <span class="required">*</span></label>
                                                    <input  name="pincode" id="pincode" type="number">
                                                    <small id="pincodeError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>Phone <span class="required">*</span></label>
                                                    <input  name="phone" id="phone" type="text">
                                                    <small id="phoneError" class="error"></small>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label>Alternative Phone <span class="required">*</span></label>
                                                    <input  name="altPhone" id="altPhone" type="text">
                                                    <small id="altPhoneError" class="error"></small>
                                                </div>
                                                <div class="col-md-12">
                                                    <button type="submit" class="btn btn-fill-out submit" name="submit" value="Submit">Save Address</button>
                                                </div>
                                            </div>
                                        </form>
    
                                </div>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<script>
    function validateForm() {
        let isValid = true;

       
        document.querySelectorAll('.error').forEach(el => el.innerText = '');

        
        const addressType = document.getElementById('addressType').value.trim();
        const name = document.getElementById('name').value.trim();
        const city = document.getElementById('city').value.trim();
        const landMark = document.getElementById('landMark').value.trim();
        const state = document.getElementById('state').value.trim();
        const pincode = document.getElementById('pincode').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const altPhone = document.getElementById('altPhone').value.trim();

        
        if (addressType === "") {
            document.getElementById('addressTypeError').innerText = 'Address type is required';
            isValid = false;
        }
        if (name === "") {
            document.getElementById('nameError').innerText = 'Name is required';
            isValid = false;
        }
        if (city === "") {
            document.getElementById('cityError').innerText = 'City is required';
            isValid = false;
        }
        if (landMark === "") {
            document.getElementById('landMarkError').innerText = 'Landmark is required';
            isValid = false;
        }
        if (state === "") {
            document.getElementById('stateError').innerText = 'State is required';
            isValid = false;
        }
        if (pincode === "" || !/^\d{6}$/.test(pincode)) {
            document.getElementById('pincodeError').innerText = 'Valid pincode is required (6 digits)';
            isValid = false;
        }
        if (phone === "" || !/^\d{10}$/.test(phone)) {
            document.getElementById('phoneError').innerText = 'Valid phone number is required (10 digits)';
            isValid = false;
        }
        if (altPhone !== "" && !/^\d{10}$/.test(altPhone)) {
            document.getElementById('altPhoneError').innerText = 'Alternative phone number must be 10 digits';
            isValid = false;
        }

        return isValid; 
    }
</script>


<%- include('../partials/user/footer.ejs') -%>